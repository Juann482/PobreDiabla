<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:insert="~{usuario/template_user.html::head}"> </head>

<body>
	<div class="container-fluid position-relative d-flex p-0">

		<div th:insert="~{usuario/template_user.html::spinner}"></div>

		<div th:insert="~{usuario/template_user.html::sidebar}"></div>

		<div class="content">

			<div th:insert="~{usuario/template_user.html::navbar}"></div>

			<!-- AQUI DEJAS TU CONTENIDO -->
			<div class="container-fluid pt-4 px-4">
				<div class="col-sm-12 ">
					<div class="bg-secondary rounded h-100 p-4">
						<h6 class="h2 text-white-50">Personajes</h6>

						<table class="table table-borderless">
							<thead>
								<tr class="center">
									<th scope="col" class="text-danger">Puesto</th>
									<th scope="col" class="text-danger">Img</th>
									<th scope="col" class="text-danger">Nombre</th>
									<th scope="col" class="text-danger">Calificación</th>
									<th scope="col" class="text-danger">Juego</th>

									<th scope="col" class="text-info">Detalles</th>
									<th scope="col" class="text-warning">Editar</th>
									<th scope="col" class="text-primary">Eliminar</th>
								</tr>
							</thead>
							<tbody th:each="person : ${personajes}">
								<tr class=" center text-white">

									<td>
										<span th:switch="${person.puesto}">

											<i th:case="1" class="bi bi-award-fill  medalla-oro"
												style="font-size: 2rem;"></i>

											<i th:case="2" class="bi bi-award-fill medalla-plata"
												style="font-size: 2rem;"></i>

											<i th:case="3" class="bi bi-award-fill medalla-bronce"
												style="font-size: 2rem;"></i>

											<span th:case="*" th:text="${person.puesto}">
											</span>
										</span>
									</td>
									<td> <img th:src="@{'/images/' + ${person.imagen}}" class="img-mini rounded-circle"
											alt="img"></td>
									<td th:classappend="${person.puesto == 1 ? 'text-oro' : 
														(person.puesto == 2 ? 'text-plata' : 
														(person.puesto == 3 ? 'text-bronce' : ''))}">
										<span th:text="${person.nombre}"></span>
									</td>
									<td><span th:utext="${'⭐'.repeat(person.calificacion)}"></span></td>
									<td th:classappend="${person.puesto == 1 ? 'text-oro' : 
																			(person.puesto == 2 ? 'text-plata' : 
																			(person.puesto == 3 ? 'text-bronce' : ''))}"
										th:text="${person.juego != null ? person.juego.nombre : '-'}">
									</td>

									<td>
										<a title="Ver" class="btn btn-info" th:attr="data-id=${person.id},
									                data-nombre=${person.nombre},
									                data-img=${'/images/' + person.imagen},
									                data-calificacion=${person.calificacion},
									                data-juego=${person.juego != null ? person.juego.nombre : 'Sin juego'},
									                data-puesto=${person.puesto + '°'},
									                data-descripcion=${person.caracteristica}" onclick="mostrarDetalles(this)">
											<i class="bi bi-eye-fill" style="color: aliceblue;"></i>
										</a>
									</td>

									<td><a title="Editar" class="btn btn-warning"
											th:href="@{/usuario/EditPerson/{id} (id = ${person.id})}"><i
												class="bi bi-pencil-fill" style="color: aliceblue;"></i></a></td>
									<td><a title="Eliminar" class="btn btn-primary"
											th:href="@{/usuario/DeletePerson/{id} (id = ${person.id})}"><i
												class="bi bi-trash-fill" style="color: aliceblue;"></i></a></td>

								</tr>

							</tbody>
						</table>
					</div>
				</div>
			</div>

			<!-- Footer -->
			<div th:insert="~{usuario/template_user.html::footer}"></div>
		</div>
	</div>
	<!-- Modal DETALLES PERSONAJE -->
	<div class="modal fade" id="detallePersonajeModal" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content bg-dark text-white border-0">

				<div class="modal-header border-secondary">
					<h5 class="modal-title" id="modalTitulo">Detalles del personaje</h5>
					<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
				</div>

				<div class="modal-body">

					<div id="cardContenedor" class="card-detalle">

						<div class="row">
							<div class="col-md-4 text-center">
								<img id="modalImagen" src="" class="img-fluid rounded mb-3 border-0" alt="Imagen">
							</div>

							<div class="col-md-8">


								<h3 id="modalNombre" class="fw-bold"></h3>

								<p class="mt-2">
									<strong>Calificación:</strong>
									<span id="modalCalificacion"></span>
								</p>

								<p>
									<strong>Juego:</strong>
									<span id="modalJuego"></span>
								</p>

								<p>
									<strong>Puesto:</strong>
									<span id="modalPuesto"></span>
								</p>

								<p>
									<strong>Descripción:</strong>
									<span id="modalDescripcion"></span>
								</p>
							</div>
						</div>

					</div>

					<div class="modal-footer border-secondary">
						<button class="btn btn-primary" data-bs-dismiss="modal">Cerrar</button>
					</div>

				</div>
			</div>
		</div>

		<div th:insert="~{usuario/template_user.html::jsFiles}"></div>

</body>

</html>